<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Aleksandar Topuzović">
  <title>Calculate checksum</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./reveal.js/dist/reset.css">
  <link rel="stylesheet" href="./reveal.js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {  background-color: #f8f8f8; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ef2929; } /* Alert */
    code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #c4a000; } /* Attribute */
    code span.bn { color: #0000cf; } /* BaseN */
    code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4e9a06; } /* Char */
    code span.cn { color: #000000; } /* Constant */
    code span.co { color: #8f5902; font-style: italic; } /* Comment */
    code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
    code span.dt { color: #204a87; } /* DataType */
    code span.dv { color: #0000cf; } /* DecVal */
    code span.er { color: #a40000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #0000cf; } /* Float */
    code span.fu { color: #000000; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
    code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
    code span.ot { color: #8f5902; } /* Other */
    code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
    code span.sc { color: #000000; } /* SpecialChar */
    code span.ss { color: #4e9a06; } /* SpecialString */
    code span.st { color: #4e9a06; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #4e9a06; } /* VerbatimString */
    code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="./reveal.js/dist/theme/beige.css" id="theme">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Calculate checksum</h1>
  <p class="author">Aleksandar Topuzović</p>
</section>

<section class="slide level2">

<p>Given an 2D array representing a spreadsheet calculate the checksum of the spreadsheet. The checksum is calculated by summing up the checksum of each row. Row checksum is the difference between the largest and the smallest number.</p>
</section>
<section class="slide level2">

<h4 id="given-the-following-spreadsheet">Given the following spreadsheet</h4>
<pre><code>5 1 9 5
7 5 3
2 4 6 8</code></pre>
<p>We calculate the checksum</p>
<div class="fragment">
<p>First row: 9 - 1 = 8</p>
</div>
<div class="fragment">
<p>Second row: 7 - 3 = 4</p>
</div>
<div class="fragment">
<p>Third row: 8 - 2 = 6</p>
</div>
<div class="fragment">
<p>Checksum = 8 + 4 + 6 = 18</p>
</div>
</section>
<section class="slide level2">

<h3 id="a-simple-solution">A simple solution</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ot">rowCksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> a</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>rowCksum xs <span class="ot">=</span> rmax <span class="op">-</span> rmin</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    rmin <span class="ot">=</span> <span class="fu">minimum</span> xs</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    rmax <span class="ot">=</span> <span class="fu">maximum</span> xs</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ot">cksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [[a]] <span class="ot">-&gt;</span> a</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>cksum <span class="ot">=</span> <span class="fu">sum</span> <span class="op">.</span> <span class="fu">map</span> rowCksum</span></code></pre></div>
</section>
<section class="slide level2">

<h4 id="drawbacks">Drawbacks</h4>
<ul>
<li>We iterate twice trough the row
<ul>
<li>Once to find the minimum</li>
<li>and once to find the maximum</li>
</ul></li>
<li>No error handling
<ul>
<li>Does not handle empty rows</li>
<li>or an empty spreadsheet</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<h3 id="a-better-solution">A better solution</h3>
<p>We implement our own min max finder using a fold</p>
<div class="fragment">
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>findMinMax (x<span class="op">:</span>xs) <span class="ot">=</span> <span class="fu">foldr</span> helper (x, x) xs</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    helper x (cmin, cmax) <span class="ot">=</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">let</span> nmin <span class="ot">=</span> <span class="kw">if</span> x <span class="op">&lt;</span> cmin <span class="kw">then</span> x <span class="kw">else</span> cmin</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>          nmax <span class="ot">=</span> <span class="kw">if</span> x <span class="op">&gt;</span> cmax <span class="kw">then</span> x <span class="kw">else</span> cmax <span class="kw">in</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        (nmin, nmax)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ot">rowCksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> a</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>rowCksum xs <span class="ot">=</span> rmax <span class="op">-</span> rmin</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    (rmin, rmax) <span class="ot">=</span> findMinMax xs</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="ot">cksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [[a]] <span class="ot">-&gt;</span> a</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>cksum <span class="ot">=</span> <span class="fu">sum</span> <span class="op">.</span> <span class="fu">map</span> rowCksum</span></code></pre></div>
</div>
</section>
<section id="but-can-we-do-better" class="slide level2">
<h2>But can we do better?</h2>
</section>
<section id="semigroup" class="slide level2">
<h2>Semigroup</h2>
<p>In mathematics, a semigroup is an algebraic structure consisting of a set together with an associative binary operation.</p>
<p>Laws</p>
<p>(A ⊕ B) ⊕ C = A ⊕ (B ⊕ C)</p>
<p><small><a href="https://en.wikipedia.org/wiki/Semigroup" class="uri">https://en.wikipedia.org/wiki/Semigroup</a></small></p>
</section>
<section id="semigroup-in-haskell" class="slide level2">
<h2>Semigroup in Haskell</h2>
<p>Implemented as a typeclass</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="dt">Semigroup</span> a <span class="kw">where</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  (&lt;&gt;) ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a</span></code></pre></div>
<p>Laws</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">&lt;&gt;</span> (y <span class="op">&lt;&gt;</span> z) <span class="ot">=</span> (x <span class="op">&lt;&gt;</span> y) <span class="op">&lt;&gt;</span> z</span></code></pre></div>
<p><small><a href="https://hackage.haskell.org/package/base/docs/Data-Semigroup.html" class="uri">https://hackage.haskell.org/package/base/docs/Data-Semigroup.html</a></small></p>
</section>
<section id="monoid" class="slide level2">
<h2>Monoid</h2>
<p>It is a semigroup with an identity element</p>
<p>Laws</p>
<p>A ⊕ E = E ⊕ A = A</p>
<p>(A ⊕ B) ⊕ C = A ⊕ (B ⊕ C)</p>
<p><small><a href="https://en.wikipedia.org/wiki/Monoid" class="uri">https://en.wikipedia.org/wiki/Monoid</a></small></p>
</section>
<section id="monoid-in-haskell" class="slide level2">
<h2>Monoid in Haskell</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="dt">Semigroup</span> a <span class="ot">=&gt;</span> <span class="dt">Monoid</span> a <span class="kw">where</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  mempty ::</span> a</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ot">  mappend ::</span> a <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> a</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mappend</span> <span class="ot">=</span> (<span class="op">&lt;&gt;</span>)</span></code></pre></div>
<p>Laws</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">&lt;&gt;</span> <span class="fu">mempty</span> <span class="ot">=</span> x</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mempty</span> <span class="op">&lt;&gt;</span> x <span class="ot">=</span> x</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">&lt;&gt;</span> (y <span class="op">&lt;&gt;</span> z) <span class="ot">=</span> (x <span class="op">&lt;&gt;</span> y) <span class="op">&lt;&gt;</span> z</span></code></pre></div>
<p><small><a href="https://hackage.haskell.org/package/base/docs/Data-Monoid.html" class="uri">https://hackage.haskell.org/package/base/docs/Data-Monoid.html</a></small></p>
</section>
<section class="slide level2">

<h3 id="some-of-the-monoids-available-in-base">Some of the monoids available in base</h3>
<p>Num monoids</p>
<ul>
<li>Min</li>
<li>Max</li>
<li>Sum</li>
<li>Product</li>
</ul>
<p>Bool monoids</p>
<ul>
<li>All</li>
<li>Any</li>
</ul>
</section>
<section class="slide level2">

<h3 id="lets-build-our-own-semigroup">Let’s build our own semigroup</h3>
<p>We can reuse <code>Min</code>, <code>Max</code> and <code>Sum</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">Min</span> a <span class="ot">=</span> <span class="dt">Min</span> {<span class="ot"> getMin ::</span> a }</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">Max</span> a <span class="ot">=</span> <span class="dt">Max</span> {<span class="ot"> getMax ::</span> a }</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">newtype</span> <span class="dt">Sum</span> a <span class="ot">=</span> <span class="dt">Sum</span> {<span class="ot"> getSum ::</span> a }</span></code></pre></div>
<div class="fragment">
<p>We define our data type</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">data</span> <span class="dt">MinMax</span> a <span class="ot">=</span> <span class="dt">MinMax</span> {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ot">    myMin ::</span> <span class="dt">Min</span> a</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  ,<span class="ot"> myMax ::</span> <span class="dt">Max</span> a</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  } <span class="kw">deriving</span> <span class="dt">Show</span></span></code></pre></div>
</div>
</section>
<section class="slide level2">

<h4 id="we-define-how-we-smash-the-elements-together">We define how we smash the elements together</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">instance</span> <span class="dt">Ord</span> a <span class="ot">=&gt;</span> <span class="dt">Semigroup</span> (<span class="dt">MinMax</span> a) <span class="kw">where</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  a <span class="op">&lt;&gt;</span> b <span class="ot">=</span> <span class="dt">MinMax</span> (myMin a <span class="op">&lt;&gt;</span> myMin b) (myMax a <span class="op">&lt;&gt;</span> myMax b)</span></code></pre></div>
<h4 id="and-a-function-that-lifts-normal-types-into-our-special-type">And a function that lifts normal types into our special type</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ot">mkMinMax ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> a <span class="ot">-&gt;</span> <span class="dt">MinMax</span> a</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>mkMinMax x <span class="ot">=</span> <span class="dt">MinMax</span> (<span class="dt">Min</span> x) (<span class="dt">Max</span> x)</span></code></pre></div>
</section>
<section class="slide level2">

<h4 id="we-calculate-the-difference">We calculate the difference</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ot">calcDiff ::</span> <span class="dt">Num</span> a <span class="ot">=&gt;</span> <span class="dt">MinMax</span> a <span class="ot">-&gt;</span> a</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>calcDiff x <span class="ot">=</span> (getMax <span class="op">.</span> myMax <span class="op">$</span> x) <span class="op">-</span> (getMin <span class="op">.</span> myMin <span class="op">$</span> x)</span></code></pre></div>
<h4 id="and-checksum-for-each-row">And checksum for each row</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ot">rowCksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> (<span class="dt">Sum</span> a)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>rowCksum xs <span class="ot">=</span> <span class="fu">fmap</span> (<span class="dt">Sum</span> <span class="op">.</span> calcDiff) res</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">=</span> <span class="fu">foldMap</span> (<span class="dt">Just</span> <span class="op">.</span> mkMinMax) xs</span></code></pre></div>
</section>
<section class="slide level2">

<h4 id="and-for-the-entire-spreadsheet">And for the entire spreadsheet</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ot">cksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [[a]] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> a</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>cksum xs <span class="ot">=</span> <span class="fu">fmap</span> getSum <span class="op">$</span> <span class="fu">foldMap</span> (rowCksum) xs</span></code></pre></div>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>
<p>We iterate trough the row only once and combine the elements of the row by using the custom monoid.</p>
<p>For the row checksum we use the Sum monoid which we combine with other rows to obtain the spreadsheet checksum.</p>
<div class="fragment">
<p>We wrap our semigroup in a Maybe to obtain a monoid.</p>
<p>It makes the handling of empty rows/spreadsheets trivial.</p>
</div>
</section>
<section id="but-can-we-do-better-1" class="slide level2">
<h2>But can we do better?</h2>
</section>
<section class="slide level2">

<h3 id="we-can-reuse-the-semigrup-instance-for-pair">We can reuse the Semigrup instance for pair (,)</h3>
<h4 id="we-need-a-new-lift-function">We need a new lift function</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ot">mkMinMax ::</span> a <span class="ot">-&gt;</span> (<span class="dt">Maybe</span> (<span class="dt">Min</span> a), <span class="dt">Maybe</span> (<span class="dt">Max</span> a))</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>mkMinMax x <span class="ot">=</span> (<span class="dt">Just</span> <span class="op">$</span> <span class="dt">Min</span> x, <span class="dt">Just</span> <span class="op">$</span> <span class="dt">Max</span> x)</span></code></pre></div>
</section>
<section class="slide level2">

<h4 id="checksum-calculation-remains-similar">Checksum calculation remains similar</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ot">calcDiff ::</span> (<span class="dt">Applicative</span> f, <span class="dt">Num</span> a) <span class="ot">=&gt;</span> (f a, f a) <span class="ot">-&gt;</span> f a</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>calcDiff x <span class="ot">=</span> (<span class="op">-</span>) <span class="op">&lt;$&gt;</span> (<span class="fu">snd</span> x) <span class="op">&lt;*&gt;</span> (<span class="fu">fst</span> x)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="ot">rowCksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [a] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> (<span class="dt">Sum</span> a)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>rowCksum xs <span class="ot">=</span> <span class="fu">fmap</span> <span class="dt">Sum</span> <span class="op">$</span> calcDiff res&#39;</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">where</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    res&#39; <span class="ot">=</span> bimap (<span class="fu">fmap</span> getMin) (<span class="fu">fmap</span> getMax) res</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">=</span> <span class="fu">foldMap</span> mkMinMax xs</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="ot">cksum ::</span> (<span class="dt">Num</span> a, <span class="dt">Ord</span> a) <span class="ot">=&gt;</span> [[a]] <span class="ot">-&gt;</span> <span class="dt">Maybe</span> a</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>cksum xs <span class="ot">=</span> <span class="fu">fmap</span> getSum <span class="op">$</span> <span class="fu">foldMap</span> (rowCksum) xs</span></code></pre></div>
</section>
<section class="slide level2">

<p><a href="https://github.com/atopuzov/haskellstuff/tree/master/calcchecksum">Repository with code</a></p>
<p><a href="https://argumatronic.com/posts/2019-06-21-algebra-cheatsheet.html">Algebra cheatsheet</a></p>
</section>
<section id="questions" class="slide level2">
<h2>Questions?</h2>
</section>
<section id="thank-you" class="slide level2">
<h2>Thank you!</h2>
<p>github.com/atopuzov</p>
<p>twitter.com/atopuzov</p>
</section>
    </div>
  </div>

  <script src="./reveal.js/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="./reveal.js/plugin/notes/notes.js"></script>
  <script src="./reveal.js/plugin/search/search.js"></script>
  <script src="./reveal.js/plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
      
        // Push each slide change to the browser history
        history: true,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
